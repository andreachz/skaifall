import{c as d,r as n}from"./index-DjeUAv9f.js";var j=typeof d=="object"&&d&&d.Object===Object&&d,z=typeof self=="object"&&self&&self.Object===Object&&self;j||z||Function("return this")();var h=typeof window<"u"?n.useLayoutEffect:n.useEffect;function S(r,e,o,s){const l=n.useRef(e);h(()=>{l.current=e},[e]),n.useEffect(()=>{const u=window;if(!(u&&u.addEventListener))return;const a=i=>{l.current(i)};return u.addEventListener(r,a,s),()=>{u.removeEventListener(r,a,s)}},[r,o,s])}function v(r){const e=n.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return h(()=>{e.current=r},[r]),n.useCallback((...o)=>{var s;return(s=e.current)==null?void 0:s.call(e,...o)},[e])}var g=typeof window>"u";function O(r,e,o={}){const{initializeWithValue:s=!0}=o,l=n.useCallback(t=>o.serializer?o.serializer(t):JSON.stringify(t),[o]),u=n.useCallback(t=>{if(o.deserializer)return o.deserializer(t);if(t==="undefined")return;const c=e instanceof Function?e():e;let E;try{E=JSON.parse(t)}catch(C){return console.error("Error parsing JSON:",C),c}return E},[o,e]),a=n.useCallback(()=>{const t=e instanceof Function?e():e;if(g)return t;try{const c=window.localStorage.getItem(r);return c?u(c):t}catch(c){return console.warn(`Error reading localStorage key “${r}”:`,c),t}},[e,r,u]),[i,f]=n.useState(()=>s?a():e instanceof Function?e():e),b=v(t=>{g&&console.warn(`Tried setting localStorage key “${r}” even though environment is not a client`);try{const c=t instanceof Function?t(a()):t;window.localStorage.setItem(r,l(c)),f(c),window.dispatchEvent(new StorageEvent("local-storage",{key:r}))}catch(c){console.warn(`Error setting localStorage key “${r}”:`,c)}}),m=v(()=>{g&&console.warn(`Tried removing localStorage key “${r}” even though environment is not a client`);const t=e instanceof Function?e():e;window.localStorage.removeItem(r),f(t),window.dispatchEvent(new StorageEvent("local-storage",{key:r}))});n.useEffect(()=>{f(a())},[r]);const w=n.useCallback(t=>{t.key&&t.key!==r||f(a())},[r,a]);return S("storage",w),S("local-storage",w),[i,b,m]}export{O as a,h as u};
//# sourceMappingURL=index-V4qb71Qz.js.map
